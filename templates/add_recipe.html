{% from "_render_field.html" import render_field %}
{% from "_render_ingredient_form.html" import render_ingredient_form %}
{% extends "base.html" %}

{% block title %}Add Recipe - We Cook{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center pt-3">
  <div class="row justify-content-center mx-1">
    <div id="center-form" class="col text-center light-primary-color">
      <h3>Add a new recipe:</h3>
      <form method="POST" action="{{ url_for('add_recipe') }}">
        {{ form.csrf_token }}
        <!-- Name input -->
        {{ render_field(form.name) }}
        <div id="ingredients-container">
          {% for subform in form.ingredients %}
          {{ render_ingredient_form(subform, loop.index0) }}
          {% endfor %}
        </div>
        <a id="add-ingredient" class="btn btn-outline-dark accent-color primary-text-color mb-4" role="button">
          Add Ingredient<i class="fas fa-plus-circle"></i>
        </a>
        {{ render_field(form.servings) }}
        <!-- Add Recipe Button -->
        <button type="submit" class="btn btn-outline-dark accent-color primary-text-color my-4">Add Recipe</button>
      </form>
      {# Form template used to create new forms #}
      <div id="ingredients-_-form" class="is-hidden row g-2" data-index="_">

        <div class="col-6">

          <div class="form-outline mb-4">
            <input class="form-control" id="ingredients-_-quantity" name="ingredients-_-quantity" type="text" value="">
            <label class="form-label" for="ingredients-_-quantity" style="margin-left: 0px;">quantity</label>

            <div class="form-notch">
              <div class="form-notch-leading" style="width: 9px;"></div>
              <div class="form-notch-middle" style="width: 52.8px;"></div>
              <div class="form-notch-trailing"></div>
            </div>
          </div>

        </div>

        <div class="col-6">

          <div class="form-outline mb-4">
            <input class="form-control" id="ingredients-_-ingredient" name="ingredients-_-ingredient" type="text" value="">
            <label class="form-label" for="ingredients-_-ingredient" style="margin-left: 0px;">ingredient</label>

            <div class="form-notch">
              <div class="form-notch-leading" style="width: 9px;"></div>
              <div class="form-notch-middle" style="width: 64px;"></div>
              <div class="form-notch-trailing"></div>
            </div>
          </div>

        </div>

        <a class="remove-ingredient btn btn-outline-dark accent-color primary-text-color my-4" role="button">Remove
          Ingredient</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}