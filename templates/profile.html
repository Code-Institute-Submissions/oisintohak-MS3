{% extends "base.html" %}

{% block title %}{{ user.name }}'s Profile - We Cook{% endblock %}

{% block content %}

<div class="container pt-3">
  <div class="row pt-2">
    <div class="col">
      <h5 class="text-center">{{ user.name }}'s Profile</h5>
    </div>
  </div>
  <div class="row pt-2">
    <div class="col-6 d-flex justify-content-end">
      <img id="profile-picture" class="img-fluid" src="{{ url_for('static', filename='images/cover.jpg') }}">
    </div>
    <div class="col-6">
      <small>{{ user.email }}</small>
      <p>A brief description of the user and what they enjoy about the site</p>


    </div>
  </div>
  <div class="row dark-bottom-border py-2">
    <div class="col text-center">
      <a class="btn btn-outline-dark accent-color text-primary-color" href="#" role="button">Edit Profile</a>
    </div>
  </div>
  <div class="row justify-content-center pt-4">
    <div class="col-12 mb-4">
      <h5 class="text-center">{{ user.name }}'s Recipes</h5>
    </div>
    {% for recipe in recipes %}
    <div class="col-12 col-lg-6 mb-4">
      <div class="card shadow-2-strong p-1 recipe-card">
        <h5 class="card-title text-center">{{ recipe.name }}</h5>
        <div class="row">
          <div class="col-12 col-md-6 d-flex justify-content-center align-items-center">
            {% if recipe.recipe_image_url %}
            <img src="{{ recipe.recipe_image_url }}" class="recipe-card-image" />
            {% else %}
            <img src="{{ url_for('static', filename='images/cover.jpg') }}" class="recipe-card-image" />
            {% endif %}
          </div>
          <div class="col-12 col-md-6">
            <div class="card-text">
              <div class="accordion" id="recipe-accordion-{{ loop.index0 }}">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="ingredients-heading-{{ loop.index0 }}">
                    <button class="accordion-button" type="button" data-mdb-toggle="collapse"
                      data-mdb-target="#ingredients-collapse-{{ loop.index0 }}" aria-expanded="true"
                      aria-controls="ingredients-collapse-{{ loop.index0 }}">
                      Ingredients:
                    </button>
                  </h2>
                  <div id="ingredients-collapse-{{ loop.index0 }}" class="accordion-collapse collapse show"
                    aria-labelledby="ingredients-heading-{{ loop.index0 }}"
                    data-mdb-parent="#recipe-accordion-{{ loop.index0 }}">
                    <div class="accordion-body">
                      <ul>
                        {% for ingredient in recipe.ingredients %}
                        <li>
                          {{ ingredient.quantity }} {{ ingredient.ingredient }}
                        </li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="instructions-heading-{{ loop.index0 }}">
                    <button class="accordion-button collapsed" type="button" data-mdb-toggle="collapse"
                      data-mdb-target="#instructions-collapse-{{ loop.index0 }}" aria-expanded="false"
                      aria-controls="instructions-collapse-{{ loop.index0 }}">
                      Instructions:
                    </button>
                  </h2>
                  <div id="instructions-collapse-{{ loop.index0 }}" class="accordion-collapse collapse"
                    aria-labelledby="instructions-heading-{{ loop.index0 }}"
                    data-mdb-parent="#recipe-accordion-{{ loop.index0 }}">
                    <div class="accordion-body">
                      <p>
                        {{ recipe.instructions }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <small>
                <i class="fas fa-users"></i>Serves: {{ recipe.servings }}
              </small> <br>
              <small>
                <i class="far fa-clock"></i>{{ recipe.time_required }} minutes
              </small> <br>
              <small>
                <i class="fas fa-user-circle"></i>Added by: {{ recipe.added_by }}
              </small>
              <small>
                Recipe ID: {{ recipe._id }}
              </small>
              {% if session.user|lower == recipe.added_by|lower %}
              <a class="btn btn-outline-dark accent-color text-primary-color"
                href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" role="button">
                Edit Recipe
              </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}

  </div>
</div>

{% endblock %}